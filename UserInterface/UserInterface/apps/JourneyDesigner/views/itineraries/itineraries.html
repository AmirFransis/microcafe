
<page-title ng-if="layoutOptions.pageTitles" title="Itineraries" description=""></page-title>

<!-- Basic Setup -->
<div class="panel panel-default">
    <div class="panel-heading" ng-show="false">
        <h3 class="panel-title">Itineraries</h3>

        <div class="panel-options">
        </div>
    </div>
    <div class="panel-body">

        <!-- This will display the loading until the http request is complete -->
        <div class="col-md-12">
            <div class="col-lg-6 col-lg-offset-3 text-center">
                <work-spinner>
                    <img src="/Content/images/spinner.gif" /><br />
                    loading data....
                </work-spinner>
            </div>
        </div>

        <div class="col-md-12" ng-show="isLoaded">
            <a class="btn btn-lg btn-success" href="#/app/itineraries-edit/0"><i class="glyphicon glyphicon-plus"></i>&nbsp;Add new Itinerary</a>
        </div>
        
        <div class="col-sm-12" ng-show="isLoaded">
            <div class="form-group">
                <label class="col-sm-2 control-label" for="searchSeason">Season</label>
                <div class="col-sm-4">
                    <select class="form-control" id="searchSeason" data-ng-model="searchSeason">
                        <option></option>
                        <option ng-repeat="season in seasons | orderBy:'name' " value="{{season.id}}">{{season.name}}</option>
                    </select>
                </div>
                <label class="col-sm-2 control-label" for="searchProduct">Product Code</label>
                <div class="col-sm-4">
                    <select class="form-control" id="searchProduct" data-ng-model="searchProduct">
                        <option></option>
                        <option ng-repeat="product in products" value="{{product.id}}">{{product.displayName}}</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="col-sm-12 vertical-spacer"></div>

        <div class="col-sm-12" ng-show="isLoaded">
            <table id="itineraryTable" class="table table-striped table-bordered" cellspacing="0" width="100">
                <thead>
                    <tr>
                        <th class="col-md-1" ng-click="sortType = 'product.code'; sortReverse = !sortReverse">
                            Code
                            <span ng-show="sortType == 'product.code' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'product.code' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th class="col-md-6" ng-click="sortType = 'name'; sortReverse = !sortReverse">
                            Name
                            <span ng-show="sortType == 'name' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th class="col-md-3" ng-click="sortType = 'season.name'; sortReverse = !sortReverse">
                            Season
                            <span ng-show="sortType == 'season.name' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'season.name' && sortReverse" class="fa fa-caret-up"></span>
                        </th>
                        <th class="col-md-2"></th>
                    </tr>
                </thead>

                <tfoot>
                    <tr ng-show="false">
                        <th class="col-md-1">Code</th>
                        <th class="col-md-6">Name</th>
                        <th class="col-md-3">Season</th>
                        <th class="col-md-2"></th>
                    </tr>
                </tfoot>

                <tbody>
                    <tr data-ng-hide="itineraries || itineraries.length > 0">
                        <td colspan="4">
                            <div class="text-center text-warning">
                                <strong>No Itineraries!</strong>
                            </div>
                        </td>
                    </tr>
                    <tr data-ng-repeat="itinerary in itineraries | orderBy:sortType:sortReverse | filter:searchSeason | filter:searchProduct">
                        <td class="col-md-1">
                            {{ itinerary.product.code }}
                        </td>
                        <td class="col-md-6">
                            {{ itinerary.name }}
                        </td>
                        <td class="col-md-3">
                            {{ itinerary.season.name }}
                        </td>
                        <td class="col-md-2">
                            <p>
                                <a href="#/app/itineraries-edit/{{itinerary.id}}">&nbsp;<i class="glyphicon glyphicon-edit"></i>&nbsp; Edit</a>
                                <a href="#/app/itineraries-view/{{itinerary.id}}" class="btn" class="btn">&nbsp;<i class="glyphicon glyphicon-eye-open"></i>&nbsp; View</a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>


<div class="row" ng-show="false">
    <pre>{{ itineraries | json }}</pre>
</div>

<script type="text/javascript">
    jQuery(document).ready(function ($) {
        // what do you want to do on page load?
        $("#searchSeason").select2({
            placeholder: 'Select your season...',
            allowClear: true
        }).on('select2-open', function () {
            // Adding Custom Scrollbar
            $(this).data('select2').results.addClass('overflow-hidden').perfectScrollbar();
        });

        $("#searchProduct").select2({
            placeholder: 'Select your product...',
            allowClear: true
        }).on('select2-open', function () {
            // Adding Custom Scrollbar
            $(this).data('select2').results.addClass('overflow-hidden').perfectScrollbar();
        });
    });
</script>